# ğŸ§  SQL ì„œë¸Œì¿¼ë¦¬ & VIEW ì‹¤ìŠµ ëª¨ìŒì§‘

ì´ ë¬¸ì„œëŠ” **ì„œë¸Œì¿¼ë¦¬(ë‚´ë¶€ SELECTë¬¸)**ì™€ **VIEW(ê°€ìƒ í…Œì´ë¸”)** ê´€ë ¨ SQL ì‹¤ìŠµ ì˜ˆì œë¥¼ ì •ë¦¬í•œ ëª¨ìŒì§‘ì…ë‹ˆë‹¤.  
ì‹¤ìŠµìš© ë°ì´í„°ë² ì´ìŠ¤ëŠ” `codingon_store_db`ë¥¼ ì‚¬ìš©í•©ë‹ˆë‹¤.

---

## ğŸ“ ì‹¤ìŠµ1: ì„œë¸Œì¿¼ë¦¬ í™œìš© ì˜ˆì œ

---

### ğŸ“Œ ì „ìê¸°ê¸° ì¤‘ ìµœê³ ê°€ ìƒí’ˆ ì¡°íšŒ
```sql
SELECT * FROM products
WHERE category = "ì „ìê¸°ê¸°" 
AND price = (
  SELECT MAX(price) FROM products
  WHERE category = "ì „ìê¸°ê¸°" 
);
```
ğŸ‘‰ ì¹´í…Œê³ ë¦¬ê°€ ì „ìê¸°ê¸°ì¸ ìƒí’ˆ ì¤‘ì—ì„œ ê°€ì¥ ë¹„ì‹¼ ìƒí’ˆì˜ ì´ë¦„ê³¼ ê°€ê²©ì„ ì¡°íšŒí•©ë‹ˆë‹¤.

---

### ğŸ“Œ ì‹ ìš©ì¹´ë“œ ê²°ì œ ê³ ê° ì¡°íšŒ
```sql
SELECT name, customer_id
FROM customers
WHERE customer_id IN (
  SELECT customer_id
  FROM orders
  WHERE payment_method = "ì‹ ìš©ì¹´ë“œ"
);
```
ğŸ‘‰ ê²°ì œê°€ 'ì‹ ìš©ì¹´ë“œ'ë¡œ ì´ë£¨ì–´ì§„ ì£¼ë¬¸ì„ í•œ ê³ ê°ì˜ ì´ë¦„ê³¼ IDë¥¼ ì¡°íšŒí•©ë‹ˆë‹¤.

---

### ğŸ“Œ ê°€ì¥ ìµœê·¼ì— ì£¼ë¬¸í•œ ê³ ê° ì¡°íšŒ
```sql
SELECT name, order_date
FROM customers c
  JOIN orders o ON c.customer_id = o.customer_id
WHERE order_date = (
  SELECT MAX(order_date) FROM orders
);
```
ğŸ‘‰ 1íšŒ ì´ìƒ ì£¼ë¬¸í•œ ê³ ê° ì¤‘ ê°€ì¥ ìµœê·¼ ì£¼ë¬¸í•œ ê³ ê°ì„ ì¶œë ¥í•©ë‹ˆë‹¤.

---

### ğŸ“Œ ì´ ê²°ì œ ê¸ˆì•¡ì´ 30ë§Œ ì› ì´ìƒì¸ ì£¼ë¬¸ ì¡°íšŒ
```sql
SELECT order_id, total_price
FROM  (
  SELECT order_id,
  ROUND(SUM(quantity * unit_price * (1 - discount_rate / 100))) total_price
  FROM order_items
  GROUP BY order_id
) sub
WHERE total_price >= 300000;
```
ğŸ‘‰ ì£¼ë¬¸ë³„ ì´ ê²°ì œ ê¸ˆì•¡ì„ ê³„ì‚°í•œ í›„, 30ë§Œ ì› ì´ìƒì¸ ì£¼ë¬¸ì„ í•„í„°ë§í•©ë‹ˆë‹¤.

---

## ğŸ“ ì‹¤ìŠµ2: VIEW ì‹¤ìŠµ ì˜ˆì œ

---

### ğŸ“Œ ê³ ê° ì •ë³´ ë·° ìƒì„± ë° ì¡°íšŒ
```sql
CREATE VIEW v_customers AS
  SELECT customer_id, name FROM customers;

SELECT * FROM v_customers;
```
ğŸ‘‰ ê³ ê° IDì™€ ì´ë¦„ë§Œ í¬í•¨í•˜ëŠ” ë·°ë¥¼ ìƒì„±í•˜ê³  ì¡°íšŒí•©ë‹ˆë‹¤.

---

### ğŸ“Œ ì£¼ë¬¸ ê¸ˆì•¡ ìš”ì•½ ë·° ìƒì„±
```sql
CREATE VIEW v_order_price AS
  SELECT order_id,
  ROUND(SUM(quantity * unit_price * (1 - discount_rate / 100))) total_price
  FROM order_items
  GROUP BY order_id;

SELECT * FROM v_order_price
WHERE total_price >= 300000;
```
ğŸ‘‰ ì£¼ë¬¸ë³„ ì´ ê²°ì œ ê¸ˆì•¡ì„ ê³„ì‚°í•˜ëŠ” ë·°ë¥¼ ë§Œë“¤ê³ , 30ë§Œ ì› ì´ìƒì¸ ì£¼ë¬¸ë§Œ ì¡°íšŒí•©ë‹ˆë‹¤.

---

### ğŸ“Œ ê³ ê°-ì£¼ë¬¸ ê²°í•© ë·° ìƒì„± ë° ìˆ˜ì •
```sql
CREATE OR REPLACE VIEW v_customer_orders AS
SELECT c.name ì´ë¦„, email ì´ë©”ì¼, o.order_id "ì£¼ë¬¸ ì•„ì´ë””", o.order_date "ì£¼ë¬¸ ì¼", city
FROM customers c
JOIN orders o ON c.customer_id = o.customer_id;

SELECT * FROM v_customer_orders;
```
ğŸ‘‰ ê³ ê°ëª…, ì´ë©”ì¼, ì£¼ë¬¸ ì •ë³´ê°€ í¬í•¨ëœ ë·°ë¥¼ ìƒì„±í•©ë‹ˆë‹¤.

---

### ğŸ“Œ VIEWì˜ êµ¬ì¡° ë° ì •ì˜ í™•ì¸
```sql
DESC v_customer_orders;
SHOW CREATE VIEW v_customer_orders;
```
ğŸ‘‰ ë·°ì˜ ì»¬ëŸ¼ êµ¬ì¡°ì™€ ì •ì˜ SQLì„ í™•ì¸í•©ë‹ˆë‹¤.

---

### ğŸ“Œ VIEWë¡œ ë°ì´í„° ìˆ˜ì • ë° ì‚½ì…
```sql
CREATE OR REPLACE VIEW v_customers AS
SELECT customer_id, name FROM customers
WHERE customer_id < 20
WITH CHECK OPTION;

UPDATE v_customers
SET name = "í™ê¸¸ë‚¨"
WHERE customer_id = 1;

INSERT INTO v_customers (customer_id, name) VALUES (10, "í…ŒìŠ¤íŠ¸");
```
ğŸ‘‰ ì¡°ê±´ì„ ê°€ì§„ VIEWë¥¼ í†µí•´ ë°ì´í„° ìˆ˜ì • ë° ì‚½ì… ì‹¤ìŠµì„ ì§„í–‰í•©ë‹ˆë‹¤.

---

### ğŸ“Œ VIEW ì‚­ì œ ë° ëª©ë¡ ì¡°íšŒ
```sql
DROP VIEW v_customers;
SHOW FULL TABLES IN codingon_store_db WHERE TABLE_TYPE LIKE 'VIEW';
```
ğŸ‘‰ ë·° ì‚­ì œì™€ ë·° ëª©ë¡ í™•ì¸ ë°©ë²•ì„ ìµí™ë‹ˆë‹¤.

---

### ğŸ“Œ ì£¼ë¬¸ ìš”ì•½ ë·° ìƒì„± ë° í™œìš©
```sql
CREATE VIEW v_order_summary AS
SELECT c.customer_id, c.name customer_name, p.name product_name, oi.quantity, o.order_date
FROM customers c
JOIN orders o ON c.customer_id = o.customer_id
JOIN order_items oi ON o.order_id = oi.order_id
JOIN products p ON oi.product_id = p.product_id;

SELECT customer_name, order_date
FROM v_order_summary
ORDER BY customer_name ASC, order_date DESC;
```
ğŸ‘‰ ê³ ê°, ì œí’ˆ, ì£¼ë¬¸ ì •ë³´ë¥¼ í†µí•©í•œ ìš”ì•½ ë·°ë¥¼ ìƒì„±í•˜ê³  ì •ë ¬í•˜ì—¬ ì¡°íšŒí•©ë‹ˆë‹¤.

---

ğŸ“Œ **ì°¸ê³ :**  
VIEWëŠ” ë³µì¡í•œ ì¿¼ë¦¬ë¥¼ ë‹¨ìˆœí™”í•˜ê³  ì¬ì‚¬ìš©í•˜ê¸° ì¢‹ìœ¼ë©°, ì„œë¸Œì¿¼ë¦¬ëŠ” ì¡°ê±´ ê¸°ë°˜ì˜ í•„í„°ë§ì— ê°•ë ¥í•œ ê¸°ëŠ¥ì„ ì œê³µí•©ë‹ˆë‹¤. ë‹¤ì–‘í•œ ë°ì´í„°ì…‹ìœ¼ë¡œ ì‘ìš©í•´ ë³´ì„¸ìš”! ğŸš€